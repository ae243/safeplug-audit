(function(ns){var svcurl=window.location.protocol+"//"+window.location.host+"/svc/api/";var valtoken_incookie=true;var ECODE_NOTAUTHORIZED=606;var ECODE_NOTAVAIL=806;var ECODE_USER_DISABLED=833;var ECODE_ALREADYEXISTS=808;function log(str){try{console.log(str)}catch(e){}}var _rpcPending=0;var valtoken=null;function $(n){if(typeof(n)=="string"){return document.getElementById(n)}else{return n}}function dce(t,i,c,ch){var el=document.createElement(t);if(t=="a"){el.href="#"}if(i){el.id=i}if(c){el.className=c}if(ch){if(ch.constructor==Array){for(var i=0;i<ch.length;i++){if(ch[i]){el.appendChild(ch[i])}}}else{el.appendChild(ch)}}return el}function dcd(c,ch,i){var el=dce("div",i,c,ch);return el}function dca(oc,i,c,t,ch){var a=dce("a",i,c,ch);a.href="#";if(oc){a.onclick=oc}if(t){a.title=t}return a}function dci(u,i,c,a){var im=dce("img",i,c);im.border="0";if(a){im.alt=a}if(u){im.src=u}return im}function dcc(i,c,checked){var el=dce("input",i,c);el.type="checkbox";el.checked=checked?true:false;return el}function dcr(i,c,n,checked){var el=dce("input",i,c);el.type="radio";el.name=n;el.checked=checked?true:false;return el}function dcl(fid,c){var l=dce("label",null,c);l.htmlFor=fid;return l}function dctn(t){return document.createTextNode(t)}function dco(l,v,i,c){var o=dce("option",i,c);o.value=v;o.appendChild(dctn(l));return o}function rac(e,s){var el=$(e);if(el){while(el.hasChildNodes()){var c=el.firstChild;el.removeChild(c)}if(s&&el.parentNode){el.parentNode.removeChild(el)}}}function lCN(e){var cnl=[];var el=$(e);if(el){if(el.className){cnl=el.className.split(" ")}}return cnl}function irCN(e,cn,cnl){if(cnl===undefined||cnl===null){cnl=lCN(e)}for(var i=0;i<cnl.length;i++){if(cnl[i]==cn){cnl.splice(i,1);i--}}return cnl}function hCN(e,cn){var r=false;var el=$(e);if(el){var cnl=lCN(el,cn);for(var i=0;i<cnl.length;i++){if(cnl[i]==cn){r=true;break}}}return r}function aCN(e,cn){var el=$(e);if(el){var cnl=irCN(el,cn);cnl[cnl.length]=cn;el.className=cnl.join(" ")}}function rCN(e,cn){var el=$(e);if(el){var cnl=irCN(el,cn);el.className=cnl.join(" ")}}function tCN(e,cn){if(hCN(e,cn)){rCN(e,cn)}else{aCN(e,cn)}}function fet(t,cn,cb,o){var ts=document.getElementsByTagName(t);for(var i=0;i<ts.length;i++){if(!cn||hCN(ts[i],cn)){cb(ts[i],t,cn,o)}}}function getByClass(parent,tag,cls){var result=[];if(!parent){return result}var clses=(typeof(cls)==="string")?[cls]:cls;var tgs=(typeof(tag)==="string")?[tag]:tag;for(var t=0;t<tgs.length;++t){var all=parent.getElementsByTagName(tgs[t]);for(var i=0;i<all.length;++i){for(var j=0;j<clses.length;++j){if(hCN(all[i],clses[j])){result.push(all[i]);break}}}}return result}function qsa(){var r={};var qs=location.search.substring(1);var re=/([^&=]+)=?([^&]*)/g;var m;while(m=re.exec(qs)){m[2]=m[2].replace("+"," ");r[decodeURIComponent(m[1])]=decodeURIComponent(m[2])}return r}function getQueryVal(name,noDecode){var ret=null;if(window.location.search){var encName=encodeURIComponent(name);var ts=window.location.search;var idx=ts.indexOf("?"+encName+"=");if(idx==-1){idx=ts.indexOf("&"+encName+"=")}if(idx!=-1){ret=ts.slice(idx+encName.length+2);idx=ret.indexOf("&");if(idx!=-1){ret=ret.slice(0,idx)}}}return(ret&&!noDecode)?decodeURIComponent(ret):ret}function rpcPfx(m,a){var u=null;return svcurl+"json/"+m}function rpc(m,a,cb,d){var req=new XMLHttpRequest();req.onreadystatechange=function(){var rs=0;var e=null;try{rs=req.readyState}catch(e){if(window.console){console.log("RPC Failure ("+m+"): "+e)}}if(rs!=4){return}delete req.onreadystatechange;var obj={req:req};try{obj.o=eval("("+req.responseText+")")}catch(e){if(window.console){console.log("RPC Parse Error("+m+"): "+e)}}try{if(obj.o&&obj.o["HB-EXCEPTION"]){e=obj.o["HB-EXCEPTION"];delete obj.o}--_rpcPending;cb(obj,d,e)}catch(e){if(window.console){console.log("RPC Callback Exception("+m+"): "+e)}}};var p="<soapenv:Envelope><soapenv:Body><"+m+">";var v=false;if(a){for(var k in a){if(k=="valtoken"){v=true}p+="<"+k+">";var s=""+a[k];p+=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");s=null;p+="</"+k+">";k=null}}if(!v&&!valtoken_incookie&&valtoken){p+="<valtoken>"+valtoken+"</valtoken>"}p+="</"+m+"></soapenv:Body></soapenv:Envelope>";var u=rpcPfx(m,a);req.open("POST",u,true);req.send(p);++_rpcPending;p=null;return req}function bindReady(handler){var called=false;function ready(){if(called){return}called=true;handler()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",ready,false)}else{if(document.attachEvent){try{var isFrame=window.frameElement!=null}catch(e){}if(document.documentElement.doScroll&&!isFrame){function tryScroll(){if(called){return}try{document.documentElement.doScroll("left");ready()}catch(e){setTimeout(tryScroll,10)}}tryScroll()}document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){ready()}})}}if(window.addEventListener){window.addEventListener("load",ready,false)}else{if(window.attachEvent){window.attachEvent("onload",ready)}else{var fn=window.onload;window.onload=function(){fn&&fn();ready()}}}}function expireCookie(name,domain){var date=new Date();date.setTime(date.getTime()+((-1)*24*60*60*1000));document.cookie=name+"=;expires="+date.toGMTString()+";path=/";if(domain){document.cookie=name+"=;expires="+date.toGMTString()+";domain="+domain+";path=/"}}function getCookie(n){var ca=document.cookie.split(";");var i;for(i=0;i<ca.length;i++){var c=ca[i];while(c.indexOf(" ")==0){c=c.substring(1)}if(c.indexOf(n+"=")===0){return c.substring((n+"=").length,c.length)}}return null}function setCookie(n,v,t){expireCookie(n);var ma="";if(!t){var date=new Date();date.setTime(date.getTime()+(14*24*60*60*1000));ma=";expires="+date.toGMTString()}var ck=n+"="+v+ma+";path=/";ck+=";domain="+getBaseDomain(true);document.cookie=ck}function getBaseDomain(dotForCookie){var dparts=window.location.host.split(".");if(dparts.length==4){try{if(parseInt(dparts[dparts.length-1],10)==dparts[dparts.length-1]){return window.location.host}}catch(e){}}var domain="";if(dparts.length>2&&dparts[dparts.length-1].length==2&&dparts[dparts.length-2].length==2){var newParts=dparts.slice(0,dparts.length-2);newParts.push(dparts[dparts.length-2]+"."+dparts[dparts.length-1]);dparts=newParts}if(dparts.length>1){domain+=(dotForCookie?".":"")+dparts[dparts.length-2]+"."}domain+=dparts[dparts.length-1];return domain}function getURLDomain(url){var domain=url.match(/http[s]?:\/\/([^\/:]*)/)[1];return domain}function validateEmail(e){if(!e){return false}var emailregex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".\"))@(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})$/;if(emailregex.test(e)){return true}else{return false}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(elt){var len=this.length>>>0;var from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len}for(;from<len;from++){if(from in this&&this[from]===elt){return from}}return -1}}ns.$=$;ns.dcd=dcd;ns.dce=dce;ns.dci=dci;ns.dctn=dctn;ns.rac=rac;ns.hCN=hCN;ns.aCN=aCN;ns.rCN=rCN;ns.tCN=tCN;ns.fet=fet;ns.rpc=rpc;ns.qsa=qsa;ns.bindReady=bindReady;ns.getCookie=getCookie;ns.setCookie=setCookie;ns.expireCookie=expireCookie;ns.getBaseDomain=getBaseDomain;ns.getQueryVal=getQueryVal;ns.validateEmail=validateEmail;var currLocale=null;function navToLanguage(l){if(l==currLocale){return}var url=(l=="en"?"":("/"+l));var cpath=window.location.pathname;var q=window.location.search||"";var ppath="";if(cpath.substr(0,3)=="/a/"){var domainEnd=cpath.indexOf("/",3);if(domainEnd!=-1){ppath=cpath.substr(0,domainEnd);cpath=cpath.substr(domainEnd)}}if(currLocale&&cpath.indexOf("/"+currLocale)==0){cpath=cpath.substring(currLocale.length+1)}else{var id3=cpath.substring(3,4);if(id3=="/"){cpath=cpath.substring(3)}else{if(id3=="_"&&cpath.substring(6,7)=="/"){cpath=cpath.substring(6)}}}setCookie("locale",l);setCookie("localetmp",l,true);if(ppath+url+cpath==window.location.pathname){if(window.console){console.log("Language Good: "+ppath+url+cpath)}currLocale=l}else{if(window.console){console.log("Setting Language: "+ppath+url+cpath+" (was "+window.location.pathname+")")}window.location.replace(ppath+url+cpath+q)}}(function(){var nl=getCookie("locale");if(!nl){var cpath=window.location.pathname;if(cpath.substr(0,3)=="/a/"){var domainEnd=cpath.indexOf("/",3);if(domainEnd!=-1){cpath=cpath.substr(domainEnd)}}var id3=cpath.substring(3,4);if(id3=="/"){nl=cpath.substring(1,3)}else{if(id3=="_"&&cpath.substring(6,7)=="/"){nl=cpath.substring(1,6)}else{nl="en"}}if(window.console){console.log("Locale from URL: "+nl)}}else{if(window.console){console.log("Locale from cookie: "+nl)}}if(nl){navToLanguage(nl)}})();ns.getLocale=function(){return ppe.getCookie("locale")};var _pphh_modes={pppc:{},ppdevice:{},ppteam:{}};var _pphh_mode;function pph_hover(e){if(!e){var e=window.event}var t;if(e.target){t=e.target}else{if(e.srcElement){t=e.srcElement}}while(t&&!hCN(t,"pph_prodbox")){t=t.parentNode}for(var k in _pphh_modes){if(hCN(t,k)){if(_pphh_mode!=k){_pphh_mode=k;aCN("ppbox","pph_hover");fet("div","pph_prodboxes",function(el){aCN(el,"pphover")});fet("div","pph_prodbox",function(el){if(hCN(el,k)){rCN(el,"ppoff");aCN(el,"ppon")}else{rCN(el,"ppon");aCN(el,"ppoff")}});fet("div","pph_proddesc",function(el){if(hCN(el,k+"x")){aCN(el,"pphoverx")}else{rCN(el,"pphoverx")}})}break}}e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}}function pph_nobubble(e){if(!e){var e=window.event}e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}}function pph_unhover_now(e){rCN("ppbox","pph_hover");fet("div","pph_prodboxes",function(el){rCN(el,"pphover")});fet("div","pph_prodbox",function(el){rCN(el,"ppon");rCN(el,"ppoff")});fet("div","pph_proddesc",function(el){rCN(el,"pphoverx")});_pphh_mode=null}if(!formui){var formui={}}formui.submitNewUser=function(e){try{var email;var password;if(ns&&ns.nuPreValidate){ns.nuPreValidate()}aCN("pp_nu_emfmt_err","hidden");aCN("pp_nu_pwfmt_err","hidden");aCN("pp_nu_pwinv_err","hidden");aCN("pp_nu_tosreq_err","hidden");aCN("pp_nu_submit_err","hidden");var el=$("pp_nu_email");if(!el||hCN(el,"default")||!el.value||!validateEmail(el.value)){rCN("pp_nu_emfmt_err","hidden");return false}else{email=el.value}el=$("pp_nu_password");if(!el||hCN(el,"default")||!el.value){rCN("pp_nu_pwfmt_err","hidden");return false}else{password=el.value}el=$("pp_nu_tos");if(!el||!el.checked){rCN("pp_nu_tosreq_err","hidden");return false}var cuargs={email:email,password:password,client_id:"ybheOFvb1N2gD2xlGEw44A",purpose:(ns&&ns.getPurpose?ns.getPurpose():"cloud"),setcookie:(ns&&ns.noSetCookie?"0":"1"),locale:(ns&&ns.getLocale?ns.getLocale():"en")};if(ns&&ns.nuExtraArgs){try{ns.nuExtraArgs(cuargs)}catch(e){if(window.console){console.log("Exception Extra Args: "+e)}return false}}rCN(ns.modalid?ns.modalid:"pp_nu_modal","hidden");rCN(ns.loadingid?ns.loadingid:"pp_nu_loading","hidden");rpc("createUser",cuargs,function(o,d,e){aCN(ns.modalid?ns.modalid:"pp_nu_modal","hidden");aCN(ns.loadingid?ns.loadingid:"pp_nu_loading","hidden");if(o.o&&o.o.valtoken){if(ns&&ns.onNewUser){ns.onNewUser(o.o.valtoken,o.o.user)}else{var domain=getURLDomain(svcurl);var l=(ns&&ns.getLocale?ns.getLocale():"en");var pfx=(l=="en"?"":("/"+l));window.location.replace("http://"+domain+pfx+"/view")}}else{if(e&&e.ecode&&parseInt(e.ecode)==ECODE_NOTAVAIL){rCN("pp_nu_pwinv_err","hidden")}else{if(e&&e.ecode&&parseInt(e.ecode)==ECODE_ALREADYEXISTS){rCN("pp_nu_submit_dup","hidden")}else{if(ns&&ns.onNewUserError){var ecode=e;if(e&&e.ecode){ecode=parseInt(e.ecode)}ns.onNewUserError(ecode)}else{rCN("pp_nu_submit_err","hidden")}}}}})}catch(e){if(window.console){console.log("Exception Submitting: "+e)}}return false};if(!formui){var formui={}}formui.submitSignin=function(e){try{var email;var password;var remember="0";aCN("pp_si_emfmt_err","hidden");aCN("pp_si_pwfmt_err","hidden");aCN("pp_si_pwinv_err","hidden");aCN("pp_si_usrdis_err","hidden");aCN("pp_si_submit_err","hidden");var el=$("pp_si_email");if(!el||hCN(el,"default")||!el.value||!validateEmail(el.value)){rCN("pp_si_emfmt_err","hidden");return false}else{email=el.value}el=$("pp_si_password");if(!el||hCN(el,"default")||!el.value){rCN("pp_si_pwfmt_err","hidden");return false}else{password=el.value}el=$("pp_si_remember");if(el&&el.checked){remember="1"}rCN(ns.modalid?ns.modalid:"pp_si_modal","hidden");rCN(ns.loadingid?ns.loadingid:"pp_si_loading","hidden");rpc("loginUser",{email:email,password:password,client_id:"ybheOFvb1N2gD2xlGEw44A",setcookie:(ns&&ns.noSetCookie?"0":"1"),remember:remember},function(o,d,e){aCN(ns.modalid?ns.modalid:"pp_si_modal","hidden");aCN(ns.loadingid?ns.loadingid:"pp_si_loading","hidden");if(o.o&&o.o.valtoken){if(ns&&ns.onSignIn){ns.onSignIn(o.o.valtoken,o.o.user)}else{var domain=getURLDomain(svcurl);var l="en";var l=currLocale||"en";var pfx=(l=="en"?"":("/"+l));window.location.replace("http://"+domain+pfx+"/view")}}else{if(e&&e.ecode&&parseInt(e.ecode)==ECODE_NOTAUTHORIZED){rCN("pp_si_pwinv_err","hidden")}else{if(e&&e.ecode&&parseInt(e.ecode)==ECODE_USER_DISABLED){rCN("pp_si_usrdis_err","hidden")}else{if(window.console){console.log("Unexpected error: "+e+" ecode: "+(e&&e.ecode))}rCN("pp_si_submit_err","hidden")}}}})}catch(e){if(window.console){console.log("Exception Submitting: "+e)}}return false};if(!formui){var formui={}}function bindFormDefaults(){fet("input","default",function(el){var defval=el.value;el.onfocus=function(){if(hCN(this,"default")){this.value="";if(hCN(this,"password")){}rCN(this,"default")}};el.onblur=function(){if(this.value==""){aCN(this,"default");if(hCN(this,"password")){}this.value=defval}}});var f;var os=formui.submitNewUser;os=formui.submitSignin;if(os){if(f=$("pp_si_form")){f.onsubmit=formui.submitSignin}}os=formui.submitNewUser;if(os){if(f=$("pp_nu_form")){f.onsubmit=os}}}function onDocLoad(){fet("div","pph_prodbox",function(el){el.onmouseover=pph_hover;el.onclick=pph_hover});fet("div","pph_proddesc",function(el){el.onclick=pph_nobubble});fet("div","pph_bgmodal",function(el){el.onmouseover=pph_unhover_now;el.onclick=pph_unhover_now});var e=$("ppmain");if(e){e.onclick=pph_unhover_now}e=$("pplanguage");if(e){var cn=e.options;for(var i=0;i<cn.length;i++){if(cn[i].value==currLocale){e.selectedIndex=i;break}}e.onchange=function(){navToLanguage(this.options[this.selectedIndex].value)}}if(window.location.protocol=="https:"){try{fet("a",null,function(el){var h=el.getAttribute("href");if(h.indexOf("#")==0){}else{if(h.indexOf("http")==0){}else{if(h.indexOf("signin")==0){}else{if(h.indexOf("billing")==0){}else{var oh=el.href;oh=oh.replace(/^https/,"http");el.href=oh}}}}})}catch(e){}}bindFormDefaults()}bindReady(function(){setTimeout(onDocLoad,200)})})(this.exports||(ppe={}));