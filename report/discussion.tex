\section{Discussion}
\label{sec:discussion}

\subsection{Engineering Fixes}
The most critical engineering fix is authentication in the POST calls to prevent the cross-site request forgery attack.  A typical example is a cookie and a hidden form field set in the Settings page the Safeplug hosts; the cookie must be returned by the browser when making the POST request to the RPC server \cite{csrfdef}.  Although someone doing a cross-site request forgery attack such as the one described above could get the cookie sent, because of the same-origin policy, the adversary would not be able to examine the contents of the cookie to determine what to put in the form field.

\subsection{Structural Problems}
However, there are much more significant structural problems with implementing a Tor connection via an HTTP proxy.  Several of the usability problems involve user awareness and vigilance.  For example, cookies and fingerprinting problems mean that users could still be tracked across websites, regardless of whether the ad-block functionality on the Safeplug is enabled.  This poses an unreasonable stress on users who must be aware of their browsing practices and does not bode well for the advertised security and anonymity.

One type of client that deserves special attention is a non-Android mobile phone user.  Although the Tor Project publishes an Android app called Orbot on the Android Market \cite{orbot} which is supported for Android versions 2.3 and later \cite{amorbot}, there are no official Tor apps for iPhones or other non-Android devices.  Safeplug provides proxy functionality and instructions for Safari on the iPhone; however, this would only work while the user is on that wifi network that the Safeplug routes through.  If any data is sent over the cellular network or another wifi network, then the security of Tor is lost.  Additionally, the user may have to disable the proxy whenever they move to a different network, and remember to re-enable it when they want to use Tor.  This is certainly not transparent usability.  Users who are truly concerned about anonymity online should eschew the Safeplug and purchase a device that supports the Tor Browser Bundle or other Tor Project software.

\subsection{Opportunities}
Despite all the structural problems, is there a market for a Torifying piece of hardware?  Given the security pitfalls in comparison to a piece of software such as the Tor browser bundle, there seems to be no reason for a user that can run the Tor browser bundle to purchase the Safeplug or any other device.  For mobile phones, the proxy problems with mobility contribute to an already high usability cost.  However, there are an emerging class of ``smart home'' devices which may connect to the internet.  It is possible that some of these devices can be configured to use an HTTP proxy or some other middle box to Torify their traffic to an external service provider.  For them, is the benefit of some anonymity via a Safeplug-like device worthwhile?  Since the data sent by these devices to the service provider likely contains lots of identifying information, the use of Tor probably only protects the user's location at the expense of connection time and load on the Tor network.  Since proxy configuration on such devices is likely to be difficult and the amount of information hidden is unlikely to be worth the effort, a Torifying box that functions as a proxy has questionable use in this space as well.

Ultimately, the structural concerns of the Safeplug ``Torifying proxy-in-a-box'' strategy indicate that this is not the correct method for security and anonymity online.  It is critical for Safeplug to correct their engineering errors, particularly the vulnerability to silent disabling of Tor in order to protect customers who have already made use of the device, but users who are truly concerned about safety and anonymity online should make use of technologies directly from the Tor Project.